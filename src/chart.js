!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return o(1,t,n)}function o(t,e,n){if(!(e instanceof Object))throw"Invalid Target Object";return n.length?n.reduce(function(e,n){return n instanceof Object&&(!(n instanceof Array)||e instanceof Array)?function t(e,n,a,o){for(var r in n){var s=n[r]instanceof Array?"array":i(n[r]),l=e[r]instanceof Array?"array":i(e[r]);!(null==o||a<o)||"array"!==s&&"object"!==s?e[r]=n[r]:(s!==l&&(e[r]="array"===s?[]:{}),t(e[r],n[r],a+1,o))}return e}(e,n,1,t):e},e):e}function r(t,e,n){var i=document.createElement(e);return null!=n&&(i.className=n),t.appendChild(i)}function s(t,e,n){if(null==t.firstChild)return r(t,e,n);var i=document.createElement(e);return null!=n&&(i.className=n),t.insertBefore(i,t.firstChild)}function l(t){t.parentElement&&t.parentElement.removeChild(t)}function u(t){var e=t.getBoundingClientRect();return{left:window.pageXOffset+e.left,top:window.pageYOffset+e.top}}function c(t,e,n,i,a){var o="fx-".concat(e,"-from"),r="fx-".concat(e,"-active");t.classList.add(o),window.requestAnimationFrame(function(){t.classList.add(r),t.classList.add(e),t.classList.remove(o),setTimeout(function(){t.classList.remove(r),a&&t.classList.remove(e),i&&i()},n)})}function h(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n],isNaN(+n)?n:+n,t))return t[n]}function f(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.send(),n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)throw"Invalid URL";e(JSON.parse(n.responseText))}}}function d(){return Math.min(2,window.devicePixelRatio)}function p(){return/Android|iPad|iPhone|Windows Phone/.test(window.navigator.userAgent)}function g(t,e,n){var i=u(t.eCanvas),a=e-i.left,o=n-i.top,r=t.config.chart.margin;return o>=r.top&&o<t.eCanvas.clientHeight-r.bottom?function(t,e){var n=t.config.chart.margin,i="bar"===t.state.type,a=t.state["h-bounds"],o=(t.eCanvas.clientWidth-n.left-n.right)/(a.last-a.first+ +i),r=a.first+Math.floor(((i?0:o/2)+e-n.left)/o);return Math.max(a.first,Math.min(a.last,r))}(t,a):null}function m(t,e){var n,i,a,o,r=function(t){return{x:t.pageX,y:t.pageY,sx:n,sy:i,ox:a,oy:o}},s=function(e){var r=t.getBoundingClientRect();n=e.pageX,i=e.pageY,a=e.clientX-r.left,o=e.clientY-r.top},l=function t(n){document.removeEventListener("touchmove",c),document.removeEventListener("touchend",t),e("end",r(n.changedTouches[0]))},u=function t(n){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",t),e("end",r(n))},c=function(t){e("move",r(t.touches?t.touches[0]:t))};p()?t.addEventListener("touchstart",function(t){t.target===t.currentTarget&&(t.preventDefault(),1===t.touches.length?(s(t.touches[0]),e("start",r(t.touches[0])),document.addEventListener("touchmove",c),document.addEventListener("touchend",l)):l(t))}):t.addEventListener("mousedown",function(t){1===t.which&&t.target===t.currentTarget&&(t.preventDefault(),s(t),e("start",r(t)),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u))})}function v(t,e){var n=0,i=null,a=function(a){var o=t.state.zoomed?t.state.zoomed/24:1,r=Date.now(),s=g(t,a.pageX,a.pageY);r<n||(r-n<t.config.timeout.dblClick&&null!=s&&Math.abs(s-i)<=o?(e(s),n=r+t.config.timeout.zoomLock,i=null):(n=r,i=s))};p()?t.eCanvas.addEventListener("touchstart",function(t){a(t.touches[0])}):t.eCanvas.addEventListener("click",a)}function b(t){if("#"===t[0])return/^#[0-9a-z]+$/i.test(t)&&-1!==[4,5,7,9].indexOf(t.length)?(t.length<=5&&(t=t.replace(/([0-9a-z])/gi,"$1$1")),{r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16),a:t.length<=7?1:parseInt(t.substring(7,9),16)/255}):null;var e=/^rgba?\(([0-9]+), ?([0-9]+), ?([0-9]+)(?:, ?(1|0|0\.[0-9]+))?\)$/i.exec(t);return e?{r:+e[1],g:+e[2],b:+e[3],a:void 0!==e[4]?+e[4]:1}:null}function y(t,e){return e=t.a*(null!=e?e:1),"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(e,")")}function x(t,e){return null!=e?t.colors[t.state.global.theme].graph[e]:t.colors[t.state.global.theme]}function _(t,e){if(t<1e3)return(~~t).toString();var n,i=(~~t).toString().length,a=3*(Math.ceil(i/3)-1);if(i-a>1)1e3===(t=Math.round(t/Math.pow(10,a)))&&(t=1,a+=3),n=t.toString();else{n=(~~(t=Math.round(t/Math.pow(10,a-1))/10)).toString();var o=Math.round(t%1*10).toString();"0"!==o&&(n+=e.separator.decimal+o)}return n+e.suffixes[a/3-1]}function w(t,e){return t.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1"+e.separator.thousand)}function k(t,e,n){var i=new Date(t);return(n?e.fullDays:e.shortDays)[i.getUTCDay()]}function T(t,e,n){var i=new Date(t),a=n?e.fullMonths:e.shortMonths;return i.getUTCDate()+" "+a[i.getUTCMonth()]+" "+i.getUTCFullYear()}function C(t){var e=new Date(t),n=e.getUTCHours();n<10&&(n="0"+n);var i=e.getUTCMinutes();return i<10&&(i="0"+i),"".concat(n,":").concat(i)}n.r(e),function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return o(null,t,n)}({bubbles:!1,cancelable:!1,detail:void 0},e);var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var O={state:{global:{theme:"day"}},fx:{duration:350,easing:"easeOutQuad"},timeout:{zoom:350,tooltip:200,longTap:200,dblClick:400,zoomLock:500},localization:{shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonths:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],fullMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],separator:{decimal:".",thousand:" "},suffixes:["K","M","G","T"],words:{all:"All",zoomOut:"Zoom Out"}},font:{family:"Roboto, sans-serif",size:16.5,hLetter:1/1.4,weight:400},columns:{start:0,min:30,adaptive:606},chart:{thickness:{graph:3,grid:1.5},margin:{top:35,bottom:47},labelVOffset:{left:8.5,bottom:13.5},tails:!0},pie:{hover:14,text:{size:{min:27,max:39},value:{min:15,max:25},offset:{min:25,max:50,multiplier:1.5,value:35},minVisible:5,weight:700}},scroll:{thickness:1.5,margin:2},tooltip:{crossingRadius:6,offset:37},colors:{pieText:"#fff",day:{line:{grid:"#182d3b20",xText:"#8e8e93",yText:"#8e8e93"},bar:{grid:"#182d3b20",xText:"#2525297f",yText:"#2525297f",mask:"#ffffff7f"},area:{grid:"#182d3b20",xText:"#2525297f",yText:"#2525297f"},graph:{"#fe3c30":{line:"#fe3c30",button:"#e65850",tooltip:"#f34c44"},"#4bd964":{line:"#4bd964",button:"#5fb641",tooltip:"#3cc23f"},"#108be3":{line:"#108be3",button:"#3497ed",tooltip:"#108be3"},"#e8af14":{line:"#e8af14",button:"#f5bd25",tooltip:"#e4ae1b"},"#64aded":{line:"#64aded",button:"#3896e8",tooltip:"#3896e8"},"#558ded":{line:"#558ded",button:"#558ded",tooltip:"#558ded"},"#5cbcdf":{line:"#5cbcdf",button:"#5cbcdf",tooltip:"#5cbcdf"},"#3497ed":{line:"#3497ed",button:"#3497ed",tooltip:"#108be3"},"#2373db":{line:"#2373db",button:"#3381e8",tooltip:"#2373db"},"#9ed448":{line:"#9ed448",button:"#9ed448",tooltip:"#89c32e"},"#5fb641":{line:"#5fb641",button:"#5fb641",tooltip:"#4bab29"},"#f5bd25":{line:"#f5bd25",button:"#f5bd25",tooltip:"#eaaf10"},"#f79e39":{line:"#f79e39",button:"#f79e39",tooltip:"#f58608"},"#e65850":{line:"#e65850",button:"#e65850",tooltip:"#f34c44"},"#55bfe6":{line:"#55bfe6",button:"#35aadc",tooltip:"#269ed4"}}},night:{line:{grid:"#ffffff20",xText:"#a3b1c299",yText:"#a3b1c299"},bar:{grid:"#182d3b20",xText:"#a3b1c299",yText:"#ecf2f87f",mask:"#242f3e7f"},area:{grid:"#182d3b20",xText:"#a3b1c299",yText:"#ecf2f87f"},graph:{"#fe3c30":{line:"#e6574f",button:"#cf5d57",tooltip:"#f7655e"},"#4bd964":{line:"#4bd964",button:"#5ab34d",tooltip:"#4bd964"},"#108be3":{line:"#108be3",button:"#4681bb",tooltip:"#108be3"},"#e8af14":{line:"#deb93f",button:"#c9af4f",tooltip:"#deb93f"},"#64aded":{line:"#4082ce",button:"#4082ce",tooltip:"#4082ce"},"#558ded":{line:"#4461ab",button:"#4461ab",tooltip:"#4461ab"},"#5cbcdf":{line:"#4697b3",button:"#4697b3",tooltip:"#4697b3"},"#3497ed":{line:"#4681bb",button:"#4681bb",tooltip:"#5199df"},"#2373db":{line:"#345b9c",button:"#466fb3",tooltip:"#3e65cf"},"#9ed448":{line:"#88ba52",button:"#88ba52",tooltip:"#99cf60"},"#5fb641":{line:"#3da05a",button:"#3da05a",tooltip:"#3cb560"},"#f5bd25":{line:"#d9b856",button:"#f5bd25",tooltip:"#dbb630"},"#f79e39":{line:"#d49548",button:"#d49548",tooltip:"#ee9d39"},"#e65850":{line:"#cf5d57",button:"#cf5d57",tooltip:"#f7655e"},"#55bfe6":{line:"#479fc4",button:"#479fc4",tooltip:"#43adde"}}}}};function L(t){var e=this;this.el=t,this._initState(),this.el.addEventListener("click",function(){e.update(e.index+1)})}L.prototype._initState=function(){this.states=Array.prototype.map.call(this.el.querySelectorAll("[state]"),function(t,e){return{value:t.getAttribute("state"),el:t}});var t=+this.el.getAttribute("initial-state")||0;this.update(t,!0)},L.prototype.update=function(t,e){var n=this;this.index=Math.max(0,t)%this.states.length,this.states.forEach(function(t,e){t.el.style.display=e===n.index?"inline":"none"}),e||this.el.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,detail:{index:this.index,state:this.states[this.index].value}}))};var M={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return 1-M.easeInQuad(1-t)},easeInOutQuad:function(t){return t<.5?M.easeInQuad(2*t)/2:M.easeOutQuad(2*t-1)/2+.5},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1-M.easeInCubic(1-t)},easeInOutCubic:function(t){return t<.5?M.easeInCubic(2*t)/2:M.easeOutCubic(2*t-1)/2+.5},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1-M.easeInQuart(1-t)},easeInOutQuart:function(t){return t<.5?M.easeInQuart(2*t)/2:M.easeOutQuart(2*t-1)/2+.5},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1-M.easeInQuint(1-t)},easeInOutQuint:function(t){return t<.5?M.easeInQuint(2*t)/2:M.easeOutQuint(2*t-1)/2+.5}};function S(t){Object.defineProperties(this,{_cb:{value:t},_rafId:{value:null,writable:!0}})}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperties(S.prototype,{add:{value:function(t,e,n){this[t]=n?a({},e):e}},addFx:{value:function(t,e,n,i,o,r,s){var l=this[t]||(this[t]={});if(null!=e){for(var u in l)delete l[u];a(l,e)}else delete l.fx;l.fx={start:Date.now(),duration:o||0,easing:M[r]?r:"linear",destroy:null!=s?s:1===arguments.length||!Object.keys(l).length},void 0!==n&&void 0!==i&&a(l.fx,{from:n,to:i,time:0,pos:0});this._start()}},removeFx:{value:function(t,e){for(var n in this)n!==t&&0!==n.indexOf(t+":")||(e?delete this[n]:delete this[n].fx)}},clearFx:{value:function(t){for(var e in this){var n=this[e].fx;n&&(null==t||t>=n.start+n.duration)&&(n.destroy?delete this[e]:delete this[e].fx)}}},invertFx:{value:function(t,e){var n;if(!this[t]||!(n=this[t].fx))return;var i=n.from;n.from=n.to,n.to=i,n.time=1-n.time,n.start=Date.now()-n.duration*n.time,"linear"!==n.easing&&-1===n.easing.indexOf("easeInOut")&&(n.easing=n.easing.replace(/^ease(In|Out)/,function(t,e){return"ease"+("In"===e?"Out":"In")}));n.pos="linear"===n.easing?n.time:M[n.easing](n.time),null!=e&&(n.destroy=e)}},get:{value:function(t,e){var n={};for(var i in this)t&&i!==t&&0!==i.indexOf(t+":")||e&&!this[i].fx||(n[i]=this[i]);return n}},_start:{value:function(){null===this._rafId&&(this._rafId=window.requestAnimationFrame(this._onFrame.bind(this)))}},_onFrame:{value:function(){this._rafId=null;var t=Date.now();this._cb(this._updateFx(t)),this.clearFx(t),Object.keys(this.get(null,!0)).length>0&&this._start()}},_updateFx:{value:function(t){var e={};for(var n in this){var i=this[n].fx;i&&(void 0!==i.from&&void 0!==i.to&&(i.time=Math.max(0,Math.min(1,(t-i.start)/i.duration)),i.pos="linear"===i.easing?i.time:M[i.easing](i.time),"number"==typeof i.from&&"number"==typeof i.to&&(i.value=i.from+(i.to-i.from)*i.pos)),e[n]=this[n])}return e}}});var P=d(),j=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eCanvas=e,this.config=n,this.state=i,this.maxLabelWidth=this.getMaxLabelWidth()}var e,n,i;return e=t,(n=[{key:"getVisibleLabelsRange",value:function(t){var e=this.getMinLabelPresetId(t),n=this._getFirstLabelOffset(),i=this.state.xAxis.length-1,a=Math.ceil(Math.max(0,this.state.xAxis.length-1-t.last-n)/e)*e-e+n,o=Math.floor(Math.max(0,this.state.xAxis.length-1-t.first-n)/e)*e+e+n;return a<0&&(a-=Math.floor(a/e)*e),o>i&&(o-=Math.ceil((o-i)/(e/2))*(e/2)),{first:a,last:o}}},{key:"getVisibleLabels",value:function(t){var e=this.getVisibleLabelsRange(t);return this.createPresets(e)}},{key:"createPresets",value:function(t){for(var e={},n=this._getFirstLabelOffset(),i=t.first-n,a=t.last-n,o=1;;o*=2){e[o]=[];for(var r=Math.ceil((Math.max(1,i)-o)/o/2)*o*2+o;r<=a;r+=2*o)e[o].push(r+n);if(2*o>a){0===i&&(e.first=[0+n]);break}}return e}},{key:"getMinLabelPresetId",value:function(t){for(var e=this.config.chart.margin,n=(this.eCanvas.width-e.left*P-e.right*P)/(t.last-t.first),i=1;i<=1024;i*=2)if(n*i>1.75*this.maxLabelWidth)return i;return i}},{key:"getLabel",value:function(t,e){var n=new Date(this.state.xAxis[this.state.xAxis.length-1-t]),i=e?this.config.localization.fullMonths:this.config.localization.shortMonths;return n.getUTCDate()+" "+i[n.getUTCMonth()]}},{key:"getLastLabel",value:function(t){var e,n,i=-1;for(var a in t){var o=t[a].length-1;t[a][o]>i&&(i=t[a][o],e=a,n=o)}return{preset:e,index:n,value:t[e][n]}}},{key:"_getFirstLabelOffset",value:function(){var t=this.config.chart.margin,e=(this.eCanvas.width-t.left*P-t.right*P)/this.config.columns.min;return Math.max(1,Math.round(this.maxLabelWidth/2/e))}},{key:"getMaxLabelWidth",value:function(){var t=this.config.localization.shortMonths.reduce(function(t,e){return e.length>t.length?e:t},"");return this.measure(t+" 00")}},{key:"measure",value:function(t){var e=this.eCanvas.getContext("2d");e.save(),e.font=this.config.font.weight+" "+this.config.font.size*P+"px "+this.config.font.family;var n=e.measureText(t).width;return e.restore(),n}}])&&E(e.prototype,n),i&&E(e,i),t}();function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function F(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R=d(),A=function(t){function e(t,n,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=F(this,D(e).call(this,t,n,i)))._initDefaultPresets(),a}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,j),n=e,(i=[{key:"_initDefaultPresets",value:function(){var t=[[1,3,5,7,9,11,13,15,17,19,21,23],[2,4,8,10,14,16,20,22],[6,18],[12],[0]];t=t.map(function(t){return t.map(function(t){return 23-t}).reverse()}),this.defau1t=t.map(function(t){for(var e=[],n=0;n<7;n++)for(var i=0;i<t.length;i++)e.push(24*n+t[i]);return e})}},{key:"createPresets",value:function(t){var e={},n=this.state.zoomed/24;return this.defau1t.forEach(function(i,a){for(var o=[],r=0;r<i.length;r++){var s=n<=1?i[r]:i[r]*n-1+n;s>=t.first&&s<=t.last&&o.push(s)}e[Math.pow(2,a)]=o}),e}},{key:"getMinLabelPresetId",value:function(t){for(var e=this.config.chart.margin,n=(this.eCanvas.width-e.left*R-e.right*R)/(t.last-t.first),i=this.state.zoomed/24,a=1;a<=1024;a*=2)if(n*a>1.75*this.maxLabelWidth/i)return a;return a}},{key:"getLabel",value:function(t){return C(this.state.xAxis[this.state.xAxis.length-1-t])}},{key:"getMaxLabelWidth",value:function(){return this.measure("00:00")}}])&&V(n.prototype,i),a&&V(n,a),e}();function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"_getVisibleGraphsMask",value:function(){return this.state.graphs.reduce(function(t,e){return t+ +e.visible},"")}},{key:"_updateState",value:function(t){for(var e in t){var n=t[e].fx;"v-bounds"===e&&(t[e].min=n.from.min+(n.to.min-n.from.min)*n.pos,t[e].max=n.from.max+(n.to.max-n.from.max)*n.pos)}}},{key:"_percentToVBounds",value:function(t,e){return t||(t=this.state["v-bounds"]),e||(e=this.state.graphs[this.state.mask.indexOf("1")]),{min:(e.max-e.min)*t.min+e.min,max:(e.max-e.min)*t.max+e.min}}}])&&B(e.prototype,n),i&&B(e,i),t}(),W=d();function G(t,e,n){this.eCanvas=t,this.config=e,this.state=n,this.vLabelsCount=6;var i=this.state.zoomed?A:j;this.hLabels=new i(t,this.config,this.state)}G.prototype.updateHorizontalFx=function(t,e){var n=this.hLabels.getMinLabelPresetId(t),i=this.hLabels.getVisibleLabels(t);if(e)for(var a in this.state.removeFx("h-labels",!0),i)a<n||this.state.add("h-labels:"+a,{preset:+a||a});else{var o=this.state["h-bounds"];if(o.minPreset!==n||Object.keys(this.hLabels.getVisibleLabels(o)).join(" ")!==Object.keys(i).join(" ")){var r=this.state.get("h-labels");for(var s in r){var l=r[s];if(l.fx)1===l.fx.to&&l.preset<n?this.state.invertFx(s,!0):0===l.fx.to&&l.preset>=n&&this.state.invertFx(s,!1);else if(l.preset<n){for(var u in r)r[u].fx&&0===r[u].fx.to&&r[u].preset<l.preset&&this.state.removeFx(u,!0);this.state.addFx(s,null,1,0,this.config.fx.duration,null,!0)}}for(var c in i){var h="h-labels:"+c;r[h]||c<n||this.state.addFx(h,{preset:+c||c},0,1,this.config.fx.duration)}}}this.state["h-bounds"].minPreset=n},G.prototype.updateVerticalFx=function(t,e,n){var i=this.getVLabelBounds(t),a="v-labels:"+i.max+"-"+i.min;if(n)this.state.removeFx("v-labels",!0),this.state.add(a,{labels:this._getVLabels(i),graph:e.indexOf("1")});else{var o=this.state.get("v-labels");for(var r in o)r!==a&&(o[r].fx?1===o[r].fx.to&&this.state.invertFx(r,!0):this.state.addFx(r,null,1,0,this.config.fx.duration,null,!0));var s=o[a];s?s.fx&&0===s.fx.to&&this.state.invertFx(a,!1):this.state.addFx(a,{labels:this._getVLabels(i),graph:e.indexOf("1")},0,1,this.config.fx.duration)}},G.prototype.draw=function(t,e){this._drawHorizontalLabels(t,e),this._drawVerticalLabels(t,e)},G.prototype._drawHorizontalLabels=function(t,e){var n=e.width,i=e.first,a=e.margin,o=e.left,r=e.bottom,s=e.step,l=e.cXText;t.font=this.config.font.weight+" "+this.config.font.size*W+"px "+this.config.font.family,t.fillStyle=y(l),t.textAlign="center",t.textBaseline="top";var u=this.state.get("h-labels"),c=this.hLabels.getVisibleLabelsRange(this.state["h-bounds"]),h=this.hLabels.createPresets(c),f=r+this.config.chart.labelVOffset.bottom*W,d=o+(this.state.xAxis.length-1-i-c.last+("bar"===this.state.type?.5:0))*s;if(h.first){var p=h.first[0],g=this.hLabels.getLabel(p),m=this.hLabels.measure(g),v=d+(c.last-p)*s;v-m/2<n&&this.state["h-bounds"].last===this.state.xAxis.length-1&&(v=Math.min(v,n-a.right*W*.75-m/2)),t.fillStyle=y(l),t.fillText(g,v,f)}var b=c.last===this.state.xAxis.length-1?this.hLabels.getLastLabel(h):null;if(b){var x=this.hLabels.getLabel(b.value),_=this.hLabels.measure(x),w=o+(this.state.xAxis.length-1-b.value)*s-_/2;w>o/W&&(t.fillStyle=y(l),t.fillText(x,w,f))}for(var k in u){var T=u[k].preset;if("number"==typeof T&&h[T]){var C=u[k].fx;t.fillStyle=y(l,C?C.value:1);for(var O=0;O<h[T].length;O++)b&&h[T][O]===b.value||t.fillText(this.hLabels.getLabel(h[T][O]),d+(c.last-h[T][O])*s,f)}}},G.prototype._drawVerticalLabels=function(t,e){var n=e.top,i=e.bottom,a=e.left,o=e.right,r=e.po,s=e.hlw,l=e.cYText,u=e.cGrid;t.font=this.config.font.weight+" "+this.config.font.size*W+"px "+this.config.font.family,t.fillStyle=y(l),t.textAlign="start",t.textBaseline="alphabetic",t.strokeStyle=y(u),t.lineWidth=this.config.chart.thickness.grid*W,t.lineCap="butt";var c=this.state.get("v-labels");for(var h in c){var f=c[h],d=f.fx?f.fx.value:1,p=this.state.graphs[f.graph],g=this.config.state.local,m=this._percentToVBounds(null,g.scaled?p:g),v=m.min,b=(m.max-v)/(i-n);t.strokeStyle=y(u,d),t.fillStyle=y(l,d),t.beginPath();for(var x=0;x<f.labels.length;x++){var _=Math.round(i-(f.labels[x].value-v)/b);t.moveTo(a-s-r,_-r),t.lineTo(o+s-r,_-r),t.fillText(f.labels[x].text,a,_-this.config.chart.labelVOffset.left*W)}t.stroke()}},G.prototype._getVLabels=function(t){for(var e=(t.max-t.min)/(this.vLabelsCount-1),n=[],i=0;i<this.vLabelsCount;i++){var a=t.min+e*i;n.push({value:a,text:_(a,this.config.localization)})}return n},G.prototype.getVLabelBounds=function(t){var e=this.vLabelsCount-1,n=Math.max(0,(~~t.max).toString().length-3),i=Math.pow(10,n)*e,a=Math.floor(t.max/i)*i,o=a-Math.ceil((t.max-t.min)/i*10/e)*e*i/10;return{max:a,min:"line"===this.state.type?Math.max(0,o):0}},G.prototype._percentToVBounds=H.prototype._percentToVBounds;var N=d();function Q(t,e,n,i){var a=this;this.eCanvas=t,this.ctx=this.eCanvas.getContext("2d"),this.eParent=this.eCanvas.parentElement,this.config=e,this.state=n,this.cb=i,this.el=document.createElement("div"),this.el.className="b-tooltip",this.state.zoomed||(p()?this.el.addEventListener("touchstart",function(){i&&i(a.iColumn)}):this.el.addEventListener("click",function(){i&&i(a.iColumn)})),this.iHover=null,this._bind()}function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Q.prototype.draw=function(t){var e=this.state["tooltip:fade"];if(!e||0===Object.keys(this.state.get("graph-fade")).length&&-1===this.state.mask.indexOf(1))return null;var n=this.state["tooltip:position"];!p()&&n.fx&&(n.index=n.fx.value);var i=e.fx?e.fx.value:1,a=~~(t.left+(n.index-t.first)*t.step),o=n.fx?n.fx.to:~~n.index,r=~~(t.left+(o-t.first)*t.step);return this._updateBody(o,~~(a/N),~~(r/N),i,t),this.iColumn=n.index,{index:n.index,x:a,opacity:i}},Q.prototype._updateBody=function(t,e,n,i,a){var o=this,r=a.step,s=[],l=this.config.state.local;if(this.state.graphs.forEach(function(e,n){("1"===o.state.mask[n]||o.state["graph-fade:"+n])&&s.push({index:n,name:e.name,color:y(x(o.config,e.color).tooltip),text:w(e.columns[t],o.config.localization),value:e.columns[t]})}),l.stacked&&!l.percentage){var u=s.reduce(function(t,e){return t+e.value},0);s.push({name:this.config.localization.words.all,color:"inherit",text:w(u,this.config.localization),value:u})}l.percentage&&s.forEach(function(e,n){e.percentage=Math.round(o.state.data[e.index][t]-(0===n?0:Math.round(o.state.data[e.index-1][t])))});var c=this.state.xAxis[t],h=this.state.zoomed?C(c):k(c,this.config.localization)+", "+T(c,this.config.localization);this._updateHtml(e,n,i,h,s,r)},Q.prototype._updateHtml=function(t,e,n,i,a,o){if(this.el.parentElement&&0===n)this.eParent.removeChild(this.el);else{var r="<header>".concat(i,"</header>");r+="<table><tbody>",a.forEach(function(t){r+="<tr>",null!=t.percentage&&(r+='<td class="e-percentage">'.concat(t.percentage,"%</td>")),r+='<td class="e-name">'.concat(t.name,'</td><td class="e-value" style="color: ').concat(t.color,';">').concat(t.text,"</td></tr>")}),r+="</tbody></table>",this.el.style.opacity=n,this.el.style.left=t+("bar"!==this.state.type||e>this.eCanvas.clientWidth/2?0:o/(p()?2:1))+"px",this.el.innerHTML!==r&&(this.el.innerHTML=r),!this.el.parentElement&&n>0&&this.eParent.appendChild(this.el),e>this.eCanvas.clientWidth/2?this.el.classList.contains("m-left")||(this.el.classList.remove("m-right"),this.el.classList.add("m-left")):this.el.classList.contains("m-right")||(this.el.classList.remove("m-left"),this.el.classList.add("m-right"))}},Q.prototype._bind=function(){var t=this,e=function(e){e.target!==t.eCanvas&&null!==t.iHover&&(t._updateTooltipFx(null,t.iHover),t.iHover=null)},n=function t(n){document.removeEventListener("touchmove",i),document.removeEventListener("touchend",t),document.addEventListener("touchstart",e)},i=function(e){t._onHover(e.touches[0].pageX,e.touches[0].pageY)},a=function e(n){for(var i=n.target;null!==i;i=i.parentElement){if(i===t.eCanvas)return void t._onHover(n.pageX,n.pageY);if(i===t.eParent)return}document.removeEventListener("mousemove",e),t.eParent.addEventListener("mouseenter",o),null!==t.iHover&&(t._updateTooltipFx(null,t.iHover),t.iHover=null)},o=function e(){t.eParent.removeEventListener("mouseenter",e),document.addEventListener("mousemove",a)};p()?this.eCanvas.addEventListener("touchstart",function(a){a.preventDefault(),1!==a.touches.length?n():(document.removeEventListener("touchstart",e),document.addEventListener("touchmove",i),document.addEventListener("touchend",n),t._onHover(a.touches[0].pageX,a.touches[0].pageY))}):this.eParent.addEventListener("mouseenter",o)},Q.prototype._onHover=function(t,e){var n=g(this,t,e);n!==this.iHover&&(this._updateTooltipFx(n,this.iHover),this.iHover=n)},Q.prototype._updateTooltipFx=function(t,e){var n="tooltip:fade",i="tooltip:position",a=this.state[n];if(null!==t)if(a){a.fx&&0===a.fx.to&&this.state.invertFx(n,!1);var o=null===e?this.state[i].index:2*this.state[i].index/3+1*e/3;this.state.addFx(i,{index:t},o,t,this.config.fx.duration,this.config.fx.easing)}else this.state.addFx(n,null,0,1,this.config.fx.duration,null,!1),this.state.add(i,{index:t});else a&&(a.fx?1===a.fx.to&&this.state.invertFx(n,!0):this.state.addFx(n,null,1,0,this.config.fx.duration,null,!0))},Q.prototype._getBottom=function(){if(!this.el.parentElement)return null;var t=this.eCanvas.getBoundingClientRect(),e=this.el.getBoundingClientRect(),n=parseInt(getComputedStyle(this.el).marginBottom);return e.top-t.top+e.height+n};var q=d(),$=function(t){function e(t,n,i,a,o,s){var l,u,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=this,c=Z(e).call(this),(l=!c||"object"!==Y(c)&&"function"!=typeof c?X(u):c).el=t,l.el.className="b-main-chart m-"+o,s&&(l.el.className+=" m-zoomed"),l.eCanvas=r(l.el,"canvas"),l.ctx=l.eCanvas.getContext("2d"),l.config=a,l._initHMargin(),l.state=new S(l._redraw.bind(X(l))),l.state.add("xAxis",n),l.state.add("graphs",i),l.state.add("type",o),l.state.add("zoomed",s),l.state.add("mask",i.map(function(){return"1"}).join("")),l.state.add("h-bounds",{}),l.state.add("v-bounds",{});var h=function(t){l.el.dispatchEvent(new CustomEvent("zoom",{bubbles:!0,detail:{column:t}}))};return l.grid=new G(l.eCanvas,l.config,l.state),l.tooltip=new Q(l.eCanvas,l.config,l.state,h),window.addEventListener("resize",function(){var t=l.config.state.local.group;t&&t.main!==X(l)||l.onResize()}),l.onResize(),v(X(l),h),l}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,H),n=e,(i=[{key:"_initHMargin",value:function(){var t=getComputedStyle(this.el);null==this.config.chart.margin.left&&(this.config.chart.margin.left=-parseFloat(t.marginLeft)),null==this.config.chart.margin.right&&(this.config.chart.margin.right=-parseFloat(t.marginRight))}},{key:"onResize",value:function(){this.eCanvas.width=this.eCanvas.clientWidth*q,this.eCanvas.height=this.eCanvas.clientHeight*q;var t=this.state["h-bounds"];t.first&&this.grid.updateHorizontalFx(t),this.state.addFx("redraw")}},{key:"update",value:function(t,e){t&&(this.grid.updateHorizontalFx(t,e),this.state["h-bounds"].first=t.first,this.state["h-bounds"].last=t.last),e&&this.state.clearFx();var n=this._getVisibleGraphsMask();this._updateVBounds(n,e),this.state.mask!==n&&(!e&&this._updateGraphVisibilityFx(n),this.state.mask=n),this.state.addFx("redraw")}},{key:"_updateVBounds",value:function(t,e){var n=this.state["v-bounds"],i=this._getVPercentBounds(t);if(!i||i.min===n.min&&i.max===n.max)this.state.removeFx("v-bounds");else if(this.grid.updateVerticalFx(i.values,t,e),e)n.min=i.min,n.max=i.max;else if(this.state.mask===t)if(null==n.min||null==n.max)this.state.addFx("v-bounds",{event:"scroll"},{min:n.fx.to.min,max:n.fx.to.max},i,this.config.fx.duration,this.config.fx.easing);else{var a=.75*this.config.fx.duration,o=null!=n.oldStart?n.oldStart:n.fx?n.fx.start:null,r=null==o?0:Math.min(1,(Date.now()-o)/a),s={min:n.min+(i.min-n.min)*r,max:n.max+(i.max-n.max)*r};this.state.addFx("v-bounds",{event:"scroll"},s,i,a*(1-r),this.config.fx.easing)}else this.state.addFx("v-bounds",{event:"check"},{min:n.min||0,max:n.max||1},i,this.config.fx.duration,this.config.fx.easing)}},{key:"_updateGraphVisibilityFx",value:function(t){for(var e=0;e<t.length;e++)if(t[e]!==this.state.mask[e]){var n="graph-fade:"+e;this.state[n]?this.state.invertFx(n):"1"===t[e]?this.state.addFx(n,{index:e},0,1,this.config.fx.duration,this.config.fx.easing,!0):this.state.addFx(n,{index:e},1,0,this.config.fx.duration,this.config.fx.easing,!0)}}},{key:"_getDrawData",value:function(){var t=this.state.type,e=this.eCanvas.width,n=this.eCanvas.height,i=this.state["h-bounds"].first,a=this.state["h-bounds"].last,o=this.config.chart.margin,r=o.top*q,s=n-o.bottom*q,l=o.left*q,u=e-o.right*q,c=(e-l-o.right*q)/(a-i+ +("bar"===t)),h=this.config.chart.thickness.grid/2,f=(Math.ceil(h)-h)*q,d=Math.max(0,i-Math.ceil(l/c)),p=Math.min(this.state.xAxis.length-1,a+Math.ceil(o.right*q/c)),g=x(this.config)[t].xText,m=x(this.config)[t].yText,v=x(this.config)[t].grid;return{width:e,height:n,first:i,last:a,margin:o,top:r,bottom:s,left:l,right:u,step:c,hlw:h*q,po:f,leftTail:d,rightTail:p,cXText:g,cYText:m,cGrid:v}}},{key:"_getVPercentBounds",value:function(t){if(-1===t.indexOf("1"))return null;var e=this.config.state.local,n=this._getVLabelBounds(t);if(e.scaled){var i=this.state.graphs[t.indexOf("1")];return{min:(n.min-i.min)/(i.max-i.min),max:(n.max-i.min)/(i.max-i.min),values:n.values}}return{min:(n.min-e.min)/(e.max-e.min),max:(n.max-e.min)/(e.max-e.min),values:n.values}}},{key:"_getVLabelBounds",value:function(t){if("string"==typeof t)return-1===t.indexOf("1")?null:this._getVLabelBounds(this._getVBounds(t));var e=this.config.chart.margin,n=(t.max-t.min)/(this.eCanvas.height-e.top*q-e.bottom*q),i=this.grid.getVLabelBounds(t),a=this.config.font.size*this.config.font.hLetter*q,o=this.config.chart.labelVOffset.left*q,r=(i.max-t.min)/(this.eCanvas.height-e.top*q-e.bottom*q-a-o);return{min:i.min,max:n>r?t.max:i.max+(a+o)*r,values:t}}},{key:"_getVBounds",value:function(t){var e=this;return"string"==typeof t&&-1===t.indexOf("1")?null:"number"!=typeof t&&this.config.state.local.scaled?this.state.graphs.reduce(function(n,i,a){if("0"===t[a])return n;var o=e._getVBounds(a);return o?n?(o=e._translateVBounds(a,n.index,o),n.bounds.min=Math.min(n.bounds.min,o.min),n.bounds.max=Math.max(n.bounds.max,o.max),n):{bounds:o,index:a}:n},null).bounds:{min:this._getMinValue(t),max:this._getMaxValue(t)}}}])&&U(n.prototype,i),a&&U(n,a),e}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ot=d(),rt=function(t){function e(t,n,i,a,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nt(this,it(e).call(this,t,n,i,a,o,r))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,$),n=e,(i=[{key:"_redraw",value:function(t){this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height),this._updateState(t);var e=this._getDrawData();this.grid.draw(this.ctx,e),this._drawGraphs(this.ctx,t,e);var n=this.tooltip.draw(e);n&&this._drawTooltipLine(this.ctx,t,e,n)}},{key:"_drawGraphs",value:function(t,e,n){var i=n.first,a=n.last,o=n.top,r=n.bottom,s=n.left,l=n.step,u=n.leftTail,c=n.rightTail;t.lineWidth=this.config.chart.thickness.graph*ot,t.lineJoin="round",t.lineCap="round",this.config.chart.tails&&(s-=(i-u)*l,i=u,a=c);for(var h=0;h<this.state.graphs.length;h++){var f=e["graph-fade:"+h],d=this.state.graphs[h];if(d.visible||f){var p=this.config.state.local,g=this.state["v-bounds"],m=this._percentToVBounds(g.fx&&"scroll"===g.event?g.fx.to:g,p.scaled?d:p),v=m.min,b=(m.max-v)/(r-o);t.beginPath(),t.moveTo(s,r-(d.columns[i]-v)/b);for(var _=i+1;_<=a;_++)t.lineTo(s+(_-i)*l,r-(d.columns[_]-v)/b);var w=x(this.config,d.color).line;t.strokeStyle=y(w,f?f.fx.value:1),t.stroke()}}}},{key:"_drawTooltipLine",value:function(t,e,n,i){var a=n.top,o=n.bottom,r=n.po,s=n.cGrid,l=i.index,u=i.x,c=i.opacity;t.lineWidth=this.config.chart.thickness.grid*ot,t.lineCap="butt",t.strokeStyle=y(s,c),t.moveTo(u-r,a),t.lineTo(u-r,o+this.config.chart.thickness.grid/2*ot-r),t.stroke();var h=this.config.tooltip.crossingRadius*ot*c,f=this.config.chart.thickness.graph/2*ot;t.lineWidth=2*f;for(var d=0;d<this.state.graphs.length;d++){var p=e["graph-fade:"+d],g=this.state.graphs[d];if(g.visible||p){var m=this.config.state.local,v=g.columns,b=l%1==0?v[l]:v[~~l]+(v[1+~~l]-v[~~l])*(l%1),_=this._percentToVBounds(null,m.scaled?g:m),w=_.min,k=o-(b-w)/((_.max-w)/(o-a)),T=(p?p.fx.value:1)*c,C=x(this.config,g.color).line;t.strokeStyle=y(C,T);var O=Math.max(0,Math.ceil(h-f));t.clearRect(u-O,k-O,2*O,2*O),t.beginPath(),t.arc(u,k,h,0,2*Math.PI),t.stroke()}}}},{key:"_translateVBounds",value:function(t,e,n){var i=this.state.graphs[t],a=this.state.graphs[e],o=(n.min-i.min)/(i.max-i.min),r=(n.max-i.min)/(i.max-i.min);return{min:(a.max-a.min)*o+a.min,max:(a.max-a.min)*r+a.min}}},{key:"_getMinValue",value:function(t){var e=this,n=this._getDrawData(),i=function(t){var i=e.state.graphs[t],a=e.config.chart.tails?i.columns.slice(n.leftTail,n.rightTail+1):i.columns.slice(n.first,n.last+1);return Math.min.apply(Math,tt(a))};return"number"==typeof t?i(t):this.state.graphs.reduce(function(e,n,a){return"0"===t[a]?e:Math.min(e,i(a))},Number.POSITIVE_INFINITY)}},{key:"_getMaxValue",value:function(t){var e=this,n=this._getDrawData(),i=function(t){var i=e.state.graphs[t],a=e.config.chart.tails?i.columns.slice(n.leftTail,n.rightTail+1):i.columns.slice(n.first,n.last+1);return Math.max.apply(Math,tt(a))};return"number"==typeof t?i(t):this.state.graphs.reduce(function(e,n,a){return"0"===t[a]?e:Math.max(e,i(a))},Number.NEGATIVE_INFINITY)}}])&&et(n.prototype,i),a&&et(n,a),e}();function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ht(t,e){return(ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ft=d(),dt=function(t){function e(t,n,i){var a,o,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,s=ut(e).call(this),(a=!s||"object"!==st(s)&&"function"!=typeof s?ct(o):s).el=t,a.el.className="b-scroll-chart",a.eCanvas=r(a.el,"canvas"),a.ctx=a.eCanvas.getContext("2d"),a.config=i,a.state=new S(a._redraw.bind(ct(a))),a.state.add("graphs",n),a.state.add("mask",n.map(function(){return"1"}).join("")),a.state.add("h-bounds",{first:0,last:n[0].columns.length-1}),a.state.add("v-bounds",{}),a._initialize(),a.update(null,!0),window.addEventListener("resize",function(){var t=a.config.state.local.group;t&&t.scroll.chart!==ct(a)||a.onResize()}),a.onResize(),a}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(e,H),n=e,(i=[{key:"_initialize",value:function(){a(this.config.state.local,this._getVBounds(this.state.mask))}},{key:"onResize",value:function(){this.eCanvas.width=this.eCanvas.clientWidth*ft,this.eCanvas.height=this.eCanvas.clientHeight*ft,this.state.addFx("redraw")}},{key:"update",value:function(t,e){t&&(this.state["h-bounds"].first=t.first,this.state["h-bounds"].last=t.last),e&&this.state.clearFx();var n=this._getVisibleGraphsMask();this._updateVBounds(n,e),this.state.mask!==n&&(!e&&this._updateGraphVisibilityFx(n),this.state.mask=n),this.state.addFx("redraw")}},{key:"_updateVBounds",value:function(t,e){var n=this.state["v-bounds"],i=this._getVPercentBounds(t);!i||i.min===n.min&&i.max===n.max?this.state.removeFx("v-bounds"):e||-1===this.state.mask.indexOf("1")||this.state.mask===t?(n.min=i.min,n.max=i.max):this.state.addFx("v-bounds",null,{min:n.min,max:n.max},i,this.config.fx.duration,this.config.fx.easing)}},{key:"_updateGraphVisibilityFx",value:function(t){for(var e=0;e<t.length;e++)if(t[e]!==this.state.mask[e]){var n="graph-fade:"+e;this.state[n]?this.state.invertFx(n):"1"===t[e]?this.state.addFx(n,{index:e},0,1,this.config.fx.duration,this.config.fx.easing,!0):this.state.addFx(n,{index:e},1,0,this.config.fx.duration,this.config.fx.easing,!0)}}},{key:"_getVPercentBounds",value:function(t){if(-1===t.indexOf("1"))return null;var e=this.config.state.local;if(e.scaled)return{min:0,max:1};var n=this._getVBounds(t);return{min:(n.min-e.min)/(e.max-e.min),max:(n.max-e.min)/(e.max-e.min)}}},{key:"_getVBounds",value:function(t){return"string"==typeof t&&-1===t.indexOf("1")?null:{min:this._getMinValue(t),max:this._getMaxValue(t)}}}])&&lt(n.prototype,i),o&&lt(n,o),e}();function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(t,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,vt(e).call(this,t,n,i))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}(e,dt),n=e,(i=[{key:"_getChartData",value:function(t){var e=this;return this.state.graphs.reduce(function(n,i,a){var o="graph-fade:"+a,r=t[o]?t[o].fx:null;return"0"!==e.state.mask[a]||r?n[a]=r?0===a?i.columns.map(function(t){return t*r.value}):i.columns.map(function(t,e){return n[a-1][e]+t*r.value}):0===a?[].concat(i.columns):i.columns.map(function(t,e){return n[a-1][e]+t}):n[a]=0===a?i.columns.map(function(){return 0}):n[a-1],n},[])}},{key:"_redraw",value:function(t){this._updateState(t);var e=this._getChartData(t),n=this.state["h-bounds"].first,i=this.state["h-bounds"].last,a=this.eCanvas.width/(i-n+1),o=this._percentToVBounds(null,this.config.state.local),r=o.min,s=o.max,l=(s-r)/this.eCanvas.height;this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height);for(var u=this.state.graphs.length-1;u>=0;u--){var c=t["graph-fade:"+u],h=this.state.graphs[u];if(h.visible||c){this.ctx.beginPath(),this.ctx.moveTo(n*a,s/l);var f=(s-e[u][n])/l;this.ctx.lineTo(n*a,f),this.ctx.lineTo((n+1)*a,f);for(var d=n+1;d<=i;d++)f=(s-e[u][d])/l,this.ctx.lineTo((d-n)*a,f),this.ctx.lineTo((d+1-n)*a,f);this.ctx.lineTo((i+1-n)*a,s/l),this.ctx.closePath();var p=x(this.config,h.color).line;this.ctx.fillStyle=y(p),this.ctx.fill()}}}},{key:"_getMinValue",value:function(){return 0}},{key:"_getMaxValue",value:function(t){var e=this;return this.state.graphs[0].columns.reduce(function(n,i,a){var o=e.state.graphs.reduce(function(e,n,i){return"0"===t[i]?e:e+n.columns[a]},0);return o>n?o:n},Number.NEGATIVE_INFINITY)}}])&&gt(n.prototype,i),a&&gt(n,a),e}();function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t,e,n){return(kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tt(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}d();var Ot=function(t){function e(t,n,i,a,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wt(this,Tt(e).call(this,t,n,i,a,o,r))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,$),n=e,(i=[{key:"_redraw",value:function(t){this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height),this._updateState(t);var e=this._getDrawData();this._drawGraphs(this.ctx,t,e);var n=this.tooltip.draw(e);n&&this._drawTooltipLine(this.ctx,t,e,n),this.grid.draw(this.ctx,e)}},{key:"_getChartData",value:function(t){return yt.prototype._getChartData.call(this,t)}},{key:"_drawGraphs",value:function(t,e,n){var i=n.first,a=n.last,o=n.top,r=n.bottom,s=n.left,l=n.step,u=n.leftTail,c=n.rightTail;this.config.chart.tails&&(s-=(i-u)*l,i=u,a=c);for(var h=this._getChartData(e),f=this.state["v-bounds"],d=this._percentToVBounds(f.fx&&"scroll"===f.event?f.fx.to:f,this.config.state.local),p=d.min,g=(d.max-p)/(r-o),m=this.state.graphs.length-1;m>=0;m--){var v=e["graph-fade:"+m],b=this.state.graphs[m];if(b.visible||v){t.beginPath(),t.moveTo(s,r);var _=r-h[m][i]/g;t.lineTo(s,_),t.lineTo(s+l,_);for(var w=i+1;w<=a;w++)_=r-h[m][w]/g,t.lineTo(s+(w-i)*l,_),t.lineTo(s+(w+1-i)*l,_);t.lineTo(s+(a+1-i)*l,r),t.closePath();var k=x(this.config,b.color).line;t.fillStyle=y(k),t.fill()}}}},{key:"_drawTooltipLine",value:function(t,e,n,i){var a=n.left,o=n.first,r=n.last,s=n.leftTail,l=n.rightTail,u=n.top,c=n.bottom,h=n.step,f=i.index,d=(i.x,i.opacity);this.config.chart.tails&&(a-=(o-s)*h,o=s,r=l);var p=a+(f-o)*h,g=p+h,m=a+(r+1-o)*h;t.fillStyle=y(x(this.config)[this.state.type].mask,d),t.beginPath(),t.moveTo(a,u),t.lineTo(p,u),t.lineTo(p,c),t.lineTo(a,c),t.closePath(),t.fill(),t.beginPath(),t.moveTo(g,u),t.lineTo(m,u),t.lineTo(m,c),t.lineTo(g,c),t.closePath(),t.fill()}},{key:"_getVPercentBounds",value:function(t){var n=kt(Tt(e.prototype),"_getVPercentBounds",this).call(this,t);return n&&(n.min=Math.max(0,n.min)),n}},{key:"_getMinValue",value:function(){return 0}},{key:"_getMaxValue",value:function(t){for(var e=this,n=this._getDrawData(),i=this.config.chart.tails?n.leftTail:n.first,a=this.config.chart.tails?n.rightTail:n.last,o=Number.NEGATIVE_INFINITY,r=function(n){var i=e.state.graphs.reduce(function(e,i,a){return"0"===t[a]?e:e+i.columns[n]},0);i>o&&(o=i)},s=i;s<=a;s++)r(s);return o}}])&&_t(n.prototype,i),a&&_t(n,a),e}();function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function St(t,e){return!e||"object"!==Lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){return(Pt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(t,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),St(this,Et(e).call(this,t,n,i))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pt(t,e)}(e,dt),n=e,(i=[{key:"_getChartData",value:function(t){var e=this,n=0,i=-1,a=this.state.graphs.reduce(function(a,o,r){var s="graph-fade:"+r,l=t[s]?t[s].fx:null;return"0"!==e.state.mask[r]||l?l?(a[r]=0===r?o.columns.map(function(t){return t*l.value}):o.columns.map(function(t,e){return a[r-1][e]+t*l.value}),n++,i=r):(a[r]=0===r?[].concat(o.columns):o.columns.map(function(t,e){return a[r-1][e]+t}),n++,i=r):a[r]=0===r?o.columns.map(function(){return 0}):[].concat(a[r-1]),a},[]);return-1!==i&&a[0].forEach(function(t,o){for(var r=(1===n?e.state.graphs[i].columns[o]:a[i][o])/100,s=0;s<a.length;s++)a[s][o]/=r}),a}},{key:"_redraw",value:function(t){this._updateState(t);var e=this._getChartData(t),n=this.state["h-bounds"].first,i=this.state["h-bounds"].last,a=this.eCanvas.width/(i-n),o=this._percentToVBounds(null,this.config.state.local),r=o.min,s=o.max,l=(s-r)/this.eCanvas.height;this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height);for(var u=this.state.graphs.length-1;u>=0;u--){var c=t["graph-fade:"+u],h=this.state.graphs[u];if(h.visible||c){this.ctx.beginPath(),this.ctx.moveTo(n*a,s/l),this.ctx.lineTo(n*a,(s-e[u][n])/l);for(var f=n+1;f<=i;f++)this.ctx.lineTo((f-n)*a,(s-e[u][f])/l);this.ctx.lineTo((i-n)*a,s/l),this.ctx.closePath();var d=x(this.config,h.color).line;this.ctx.fillStyle=y(d),this.ctx.fill()}}}},{key:"_getMinValue",value:function(){return 0}},{key:"_getMaxValue",value:function(){return 100}}])&&Mt(n.prototype,i),a&&Mt(n,a),e}();function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ft(t,e){return!e||"object"!==zt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dt(t,e,n){return(Dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=It(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,e){return(Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At=d(),Bt=function(t){function e(t,n,i,a,o,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,It(e).call(this,t,n,i,a,o,r))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(e,$),n=e,(i=[{key:"_redraw",value:function(t){this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height),this._updateState(t);var e=this._getDrawData();this._drawGraphs(this.ctx,t,e),this.grid.draw(this.ctx,e);var n=this.tooltip.draw(e);n&&this._drawTooltipLine(this.ctx,t,e,n)}},{key:"_getChartData",value:function(t){return jt.prototype._getChartData.call(this,t)}},{key:"_drawGraphs",value:function(t,e,n){var i=n.first,a=n.last,o=n.top,r=n.bottom,s=n.left,l=n.step,u=n.leftTail,c=n.rightTail;this.config.chart.tails&&(s-=(i-u)*l,i=u,a=c);var h=this._getChartData(e),f=this.state["v-bounds"],d=this._percentToVBounds(f.fx&&"scroll"===f.event?f.fx.to:f,this.config.state.local),p=d.min,g=(d.max-p)/(r-o);this.state.add("data",h);for(var m=this.state.graphs.length-1;m>=0;m--){var v=e["graph-fade:"+m],b=this.state.graphs[m];if(b.visible||v){t.beginPath(),t.moveTo(s,r),t.lineTo(s,r-h[m][i]/g);for(var _=i+1;_<=a;_++)t.lineTo(s+(_-i)*l,r-h[m][_]/g);t.lineTo(s+(a-i)*l,r),t.closePath();var w=x(this.config,b.color).line;t.fillStyle=y(w),t.fill()}}}},{key:"_drawTooltipLine",value:function(t,e,n,i){var a=n.top,o=n.bottom,r=n.po,s=n.cGrid,l=(i.index,i.x),u=i.opacity,c=this._percentToVBounds(null,this.config.state.local),h=c.min,f=(c.max-h)/(o-a);t.lineWidth=this.config.chart.thickness.grid*At,t.lineCap="butt",t.strokeStyle=y(s,u),t.moveTo(l-r,o-100/f),t.lineTo(l-r,o+this.config.chart.thickness.grid/2*At-r),t.stroke()}},{key:"_getVPercentBounds",value:function(t){var n=Dt(It(e.prototype),"_getVPercentBounds",this).call(this,t);return n&&(n.min=0),n}},{key:"_getMinValue",value:function(){return 0}},{key:"_getMaxValue",value:function(){return 100}}])&&Vt(n.prototype,i),a&&Vt(n,a),e}();function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Wt=d(),Gt=function(){function t(e,n,i,a,o,s){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e,this.el.className="b-main-chart m-"+o,s&&(this.el.className+=" m-zoomed"),this.eCanvas=r(this.el,"canvas"),this.ctx=this.eCanvas.getContext("2d"),this.eTooltip=document.createElement("div"),this.eTooltip.className="b-tooltip",this.config=a,this._initHMargin(),this.state=new S(this._redraw.bind(this)),this.state.add("graphs",i),this.state.add("type",o),this.state.add("zoomed",s),this.state.add("mask",i.map(function(){return"1"}).join("")),this.state.add("h-bounds",{}),this.state.add("iHover",-1),this._bindHover(),window.addEventListener("resize",function(){var t=l.config.state.local.group;t&&t.main!==l||l.onResize()}),this.onResize(),v(this,function(t){l.el.dispatchEvent(new CustomEvent("zoom",{bubbles:!0,detail:{column:t}}))})}var e,n,i;return e=t,(n=[{key:"_initHMargin",value:function(){var t=getComputedStyle(this.el);null==this.config.chart.margin.left&&(this.config.chart.margin.left=-parseFloat(t.marginLeft)),null==this.config.chart.margin.right&&(this.config.chart.margin.right=-parseFloat(t.marginRight))}},{key:"_bindHover",value:function(){var t=this,e=function(e){var n=u(t.eCanvas);t._updateHoverFx(t._isInsideCircle((e.pageX-n.left)*Wt,(e.pageY-n.top)*Wt))},n=function(){t._updateHoverFx(-1)};p()?(this.eCanvas.addEventListener("touchstart",function(t){t.preventDefault(),document.removeEventListener("touchstart",n),e(t.touches[0])}),this.eCanvas.addEventListener("touchmove",function(t){e(t.touches[0])}),this.eCanvas.addEventListener("touchend",function(){document.addEventListener("touchstart",n)})):this.eCanvas.addEventListener("mousemove",e)}},{key:"onResize",value:function(){this.eCanvas.width=this.eCanvas.clientWidth*Wt,this.eCanvas.height=this.eCanvas.clientHeight*Wt,this.state.addFx("redraw")}},{key:"update",value:function(t,e){t&&(this.state["h-bounds"].first=t.first,this.state["h-bounds"].last=t.last),e&&this.state.clearFx();var n=this._getVisibleGraphsMask();this.state.mask!==n&&(!e&&this._updateGraphVisibilityFx(n),this.state.mask=n),this.state.addFx("redraw")}},{key:"_updateGraphVisibilityFx",value:function(t){for(var e=0;e<t.length;e++)if(t[e]!==this.state.mask[e]){var n="graph-fade:"+e;this.state[n]?this.state.invertFx(n):"1"===t[e]?this.state.addFx(n,{index:e},0,1,this.config.fx.duration,this.config.fx.easing,!0):this.state.addFx(n,{index:e},1,0,this.config.fx.duration,this.config.fx.easing,!0)}}},{key:"_updateHoverFx",value:function(t){if(this.state.iHover!==t){if(this.state.iHoverPrev=this.state.iHover,this.state.iHover=t,-1!==t){var e="hover:"+t,n=this.state[e];if(n)n.fx&&0===n.fx.to&&this.state.invertFx(e,!1);else{var i=this.state["hover:"+this.state.iHoverPrev],a=i?i.fx?i.fx.value:1:0,o=this.config.fx.duration*(1-a);this.state.addFx(e,{index:t},a,1,o,this.config.fx.easing,!1)}}for(var r=0;r<this.state.graphs.length;r++)if(r!==t){var s="hover:"+r,l=this.state[s];l&&(l.fx?1===l.fx.to&&this.state.invertFx(s,!0):this.state.addFx(s,null,1,0,this.config.fx.duration,this.config.fx.easing,!0))}}}},{key:"_redraw",value:function(t){this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height);var e=this._getDrawData();this._drawGraphs(this.ctx,t,e),this._drawTooltip()}},{key:"_getDrawData",value:function(){var t=this.config.chart.margin,e=t.left*Wt,n=t.top+Wt;return{margin:t,left:e,top:n,x0:e+(this.eCanvas.width-e-t.right*Wt)/2,y0:n+(this.eCanvas.height-n-t.bottom*Wt)/2+15*Wt,r:195*Wt,offset:70,rad:180/Math.PI}}},{key:"_getChartData",value:function(t){for(var e=this,n=0,i=0,a=this.state.graphs.map(function(a,o){var r="graph-fade:"+o,s=t[r]?t[r].fx:null;if("0"!==e.state.mask[o]||s){for(var l=e.state["h-bounds"],u=0,c=l.first;c<=l.last;c++)u+=a.columns[c];return u/=l.last-l.first+1,n++,i=u,Math.round(s?u*s.value:u)}return 0}),o=1===n?i:a.reduce(function(t,e){return t+e},0),r=a.map(function(t){return t/o}),s=[r[0]],l=1;l<r.length-1;l++)s[l]=s[l-1]+r[l];s[s.length]=1;var u=s.map(function(t,e){return Math.round(100*t-(0===e?0:Math.round(100*s[e-1])))});return{values:a,percentage:r,sum:s,text:u.map(function(t){return t+"%"})}}},{key:"_drawGraphs",value:function(t,e,n){var i=n.x0,a=n.y0,o=n.r,r=n.offset,s=n.rad;this.data=this._getChartData(e),t.lineWidth=1;for(var l=0;l<this.state.graphs.length;l++)if(0!==this.data.values[l]){var u=this.state["hover:"+l],c=r+360*(0===l?0:this.data.sum[l-1]),h=r+360*this.data.sum[l],f=c+(h-c)/2,d=u?u.fx?u.fx.value:1:0,p=this._vectorToPos(i,a,f,this.config.pie.hover*Wt*d);t.beginPath(),t.moveTo(p.x,p.y),t.arc(p.x,p.y,o,c/s,h/s),t.lineTo(p.x,p.y);var g=x(this.config,this.state.graphs[l].color).line;t.strokeStyle=t.fillStyle=y(g),t.fill(),t.stroke(),this._drawText(t,p.x,p.y,f,o,l)}}},{key:"_drawText",value:function(t,e,n,i,a,o){var r=this.config.pie.text;if(!(100*this.data.percentage[o]<r.minVisible)){var s=this.data.text[o],l=this._getTextSize(o);t.font="".concat(r.weight," ").concat(l*Wt,"px ").concat(this.config.font.family);var u=t.measureText(s).width,c=Math.max(0,Math.min(1,(100*this.data.percentage[o]-r.offset.min)/(r.offset.max-r.offset.min)))*(r.offset.multiplier-1)+1,h=this._vectorToPos(e,n,i,a-r.offset.value*c*Wt-u/2);t.fillStyle=y(this.config.colors.pieText),t.textAlign="center",t.textBaseline="middle",t.fillText(s,h.x,h.y)}}},{key:"_drawTooltip",value:function(){var t=this.state["hover:"+this.state.iHover]||this.state["hover:"+this.state.iHoverPrev]||null;if(this.eTooltip.parentElement&&!t&&l(this.eTooltip),t){var e=this.state.graphs[t.index],n=this._getSectorRect(t.index);this.eTooltip.style.opacity=t.fx?Math.round(100*t.fx.value)/100:1,this.eTooltip.style.left=(n.left+(n.right-n.left)/2)/Wt+"px",this.eTooltip.style.top=n.top/Wt+"px";var i='<table><tbody><tr>\n                <td class="e-name">'.concat(e.name,'</td>\n                <td class="e-value" style="color: ').concat(e.color,';">').concat(w(this.data.values[t.index],this.config.localization),"</td>\n            </tr></tbody></table>");this.eTooltip.innerHTML!==i&&(this.eTooltip.innerHTML=i),this.eTooltip.parentElement||this.el.appendChild(this.eTooltip)}}},{key:"_getVisibleGraphsMask",value:function(){return this.state.graphs.reduce(function(t,e){return t+ +e.visible},"")}},{key:"_isInsideCircle",value:function(t,e){var n=this._getDrawData(),i=n.x0,a=n.y0,o=n.r,r=n.offset,s=this._posToVector(i,a,t,e),l=s.angle;if(s.value>o)return-1;for(var u=0;u<this.data.sum.length;u++){var c=r+(0===u?0:360*this.data.sum[u-1]),h=r+360*this.data.sum[u];if(l>=c&&l<=h||l+360>=c&&l+360<=h)return u}return-1}},{key:"_posToVector",value:function(t,e,n,i){var a=n-t,o=e-i,r=Math.pow(Math.pow(a,2)+Math.pow(o,2),.5),s=180*Math.acos(a/r)/Math.PI;return o>0&&(s=360-s),{angle:s,value:r}}},{key:"_vectorToPos",value:function(t,e,n,i){var a=180/Math.PI;return{x:t+Math.cos(n/a)*i,y:e+Math.sin(n/a)*i}}},{key:"_getTextSize",value:function(t){var e=this.config.pie.text,n=100*this.data.percentage[t],i=Math.max(0,Math.min(1,(n-e.value.min)/(e.value.max-e.value.min)));return e.size.min+(e.size.max-e.size.min)*i}},{key:"_getSectorRect",value:function(t){var e,n=this._getDrawData(),i=n.x0,a=n.y0,o=n.r,r=n.offset,s=r+360*(0===t?0:this.data.sum[t-1]),l=r+360*this.data.sum[t];if(t===this.state.iHover||t===this.state.iHoverPrev){var u=s+(l-s)/2;e=this._vectorToPos(i,a,u,this.config.pie.hover*Wt)}else e={x:i,y:a};var c=this._vectorToPos(e.x,e.y,s,o),h=this._vectorToPos(e.x,e.y,l,o),f=Math.min(e.y,c.y,h.y),d=Math.max(e.y,c.y,h.y),p=Math.min(e.x,c.x,h.x),g=Math.max(e.x,c.x,h.x);return s<90&&l>90&&(d=e.y+o),s<180&&l>180&&(p=e.x-o),s<270&&l>270&&(f=e.y-o),s<360&&l>360&&(g=e.x+o),{top:f,bottom:d,left:p,right:g}}}])&&Ht(e.prototype,n),i&&Ht(e,i),t}();function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ut(t,e){return!e||"object"!==Nt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zt(t,e,n){return(Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xt(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qt=d(),$t=function(t){function e(t,n,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ut(this,Xt(e).call(this,t,n,i))}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,dt),n=e,(i=[{key:"_initialize",value:function(){for(var t=this.state.graphs,n=0;n<t.length;n++)a(t[n],this._getVBounds(n)),t[n].scale=0===n?1:(t[n].max-t[n].min)/(t[0].max-t[0].min);Zt(Xt(e.prototype),"_initialize",this).call(this)}},{key:"_redraw",value:function(t){this._updateState(t);var e=this.state["h-bounds"].first,n=this.state["h-bounds"].last,i=this.config.scroll.margin*qt,a=this.eCanvas.width/(n-e);this.ctx.clearRect(0,0,this.eCanvas.width,this.eCanvas.height),this.ctx.lineWidth=this.config.scroll.thickness*qt,this.ctx.lineJoin="round",this.ctx.lineCap="square";for(var o=0;o<this.state.graphs.length;o++){var r=t["graph-fade:"+o],s=this.state.graphs[o];if(s.visible||r){var l=this.config.state.local,u=this._percentToVBounds(null,l.scaled?s:l),c=u.min,h=u.max,f=(h-c)/(this.eCanvas.height-2*i);this.ctx.beginPath(),this.ctx.moveTo(0,i+(h-s.columns[e])/f);for(var d=e+1;d<=n;d++)this.ctx.lineTo((d-e)*a,i+(h-s.columns[d])/f);var p=x(this.config,s.color).line,g=r?2*r.fx.value-1:1;this.ctx.strokeStyle=y(p,g),this.ctx.stroke()}}}},{key:"_getMinValue",value:function(t){if("number"==typeof t){var e=this.state.graphs[t].columns.slice(this.state["h-bounds"].first,this.state["h-bounds"].last+1);return Math.min.apply(Math,Qt(e))}return this.state.graphs.reduce(function(e,n,i){return"0"===t[i]?e:Math.min(e,n.min)},Number.POSITIVE_INFINITY)}},{key:"_getMaxValue",value:function(t){if("number"==typeof t){var e=this.state.graphs[t].columns.slice(this.state["h-bounds"].first,this.state["h-bounds"].last+1);return Math.max.apply(Math,Qt(e))}return this.state.graphs.reduce(function(e,n,i){return"0"===t[i]?e:Math.max(e,n.max)},Number.NEGATIVE_INFINITY)}}])&&Yt(n.prototype,i),o&&Yt(n,o),e}();function Kt(t,e,n,i,a){var o=this;this.el=t,this.el.classList.add("b-scroll"),this.graphs=e,this.config=n,this.type=i,this.min=a,this.bounds={first:-1,last:-1},this._initChart(),this.eLeft=r(this.el,"span","e-overlay m-left"),this.eRight=r(this.el,"span","e-overlay m-right"),this.eSelector=r(this.el,"div","d-selector"),this.eLeftEdge=r(this.eSelector,"span","e-edge m-left"),this.eRightEdge=r(this.eSelector,"span","e-edge m-right"),m(this.el,this._onDrag.bind(this)),m(this.eSelector,this._onSelectorDrag.bind(this)),m(this.eLeftEdge,this._onLeftDrag.bind(this)),m(this.eRightEdge,this._onRightDrag.bind(this)),window.addEventListener("resize",function(){var t=o.config.state.local.group;t&&t.scroll!==o||o._initData(null,null,null,!0)}),this._initData(null,null,!0)}function te(t,e,n,i,a){this.el=t,this.el.classList.add("b-check-button"),this.config=a,this._initChildren(e),this.update(n),this.state=i,this.toggleState(this.state,!0),this._bind()}function ee(t,e,n,i){var a=this;this.el=function(t,e,n){var i=document.createElement(e);return i.className=((n||"")+t.className).trim(),t.parentElement.replaceChild(i,t),i}(t,"ul","b-legend"),this.graphs=e,this.config=n,this.cb=i,this.list=e.map(function(t,e){var i=r(a.el,"li"),o=y(x(n,t.color).button);return i.addEventListener("check",a._onCheck.bind(a,e)),i.addEventListener("uncheck-others",a._onUncheckOthers.bind(a,e)),new te(i,t.name,o,t.visible,n)}),this.el.setAttribute("size",this.list.length)}function ne(t,e,n){var i=this;this.el=t,this.el.classList.add("b-chart-widget"),p()&&this.el.classList.add("m-mobile"),this._initConfig(e,n);var a=function(){i.config.state.local.group=i.original=i._initGroup(e)};if(document.fonts){var o=this.config.font;document.fonts.load("".concat(o.weight," ").concat(o.size,"px ").concat(o.family)).then(a)}else a()}function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Kt.prototype._initChart=function(){var t;switch(this.type){case"line":t=$t;break;case"bar":t=yt;break;case"pie":case"area":t=jt}this.chart=new t(r(this.el,"div"),this.graphs,this.config)},Kt.prototype.update=function(t,e){var n=this.graphs[0].columns.length-1;this._initData(n-t.last,n-t.first,e)},Kt.prototype._initData=function(t,e,n,i){var a=this.config.columns,o=this.el.clientWidth,r=a.adaptive?o/a.adaptive:1;null==t&&(t=a.start),null==e&&(e=a.end);var s=1/(this.graphs[0].columns.length-1);this.minWidth=Math.min(1,(null!=this.min?this.min:~~((a.min-1)*r))*s),this.maxWidth=!a.max||a.max<(null!=this.min?this.min:a.min)?1:Math.min(1,~~((a.max-1)*r)*s),null!=this.width?this.width=Math.max(this.minWidth,Math.min(this.maxWidth,this.width)):this.width=!e||e<t?this.minWidth:Math.min(1,Math.max(this.minWidth,(e-t)*s)),i||(this.pos=Math.max(0,1-this.width-t*s)),this._updateSelector(n)},Kt.prototype._updateSelector=function(t){var e=Math.round(1e4*this.pos)/100,n=Math.round(1e4*(1-this.pos-this.width))/100;this.eSelector.style.left=this.eLeft.style.width=e+"%",this.eSelector.style.right=this.eRight.style.width=n+"%";var i=this.getBounds();if(i.first===i.last)throw"Invalid Environment";var a=this.bounds;this.bounds=i,t||a.first===i.first&&a.last===i.last||this.el.dispatchEvent(new CustomEvent("new-bounds",{bubbles:!0,detail:i}))},Kt.prototype.getBounds=function(){var t=this.graphs[0].columns.length-1;return{first:Math.round(t*this.pos),last:this.pos+this.width>.999?t:Math.round(t*(this.pos+this.width))}},Kt.prototype._onDrag=function(t,e){var n=this.el.clientWidth,i=u(this.el).left,a=(e.x-i)/n-this.width/2;this.pos=Math.max(0,Math.min(1-this.width,a)),this._updateSelector()},Kt.prototype._onSelectorDrag=function(t,e){var n=this.el.clientWidth,i=u(this.el).left,a=(e.x-i-e.ox)/n;this.pos=Math.max(0,Math.min(1-this.width,a)),this._updateSelector()},Kt.prototype._onLeftDrag=function(t,e){var n=this.el.clientWidth,i=u(this.el).left-1.5,a=this.pos+this.width,o=(e.x-i-e.ox)/n;this.pos=Math.max(0,a-this.maxWidth,Math.min(a-this.minWidth,o)),this.width=a-this.pos,this._updateSelector()},Kt.prototype._onRightDrag=function(t,e){var n=this.el.clientWidth,i=u(this.el).left+1.5,a=this.eRightEdge.clientWidth-e.ox,o=(e.x-i+a)/n-this.pos;this.width=Math.max(this.minWidth,Math.min(1-this.pos,this.maxWidth,o)),this._updateSelector()},te.prototype._initChildren=function(t){this.eIcon=r(this.el,"i","e-icon"),this.eLabel=r(this.el,"span","e-label"),this.eLabel.textContent=t},te.prototype._bind=function(){var t=this;if(p()){var e=null;this.el.addEventListener("touchstart",function(){e=setTimeout(function(){e=null,t._onRightClick()},t.config.timeout.longTap)}),this.el.addEventListener("touchend",function(){null!==e&&(clearTimeout(e),t._onClick())})}else this.el.addEventListener("click",this._onClick.bind(this)),this.el.addEventListener("contextmenu",function(e){e.preventDefault(),t._onRightClick()})},te.prototype.update=function(t){this.eLabel.style.color=t,this.el.style.backgroundColor=t},te.prototype.toggleState=function(t,e){this.state=null!=t?t:!this.state,this.state?(this.el.classList.add("m-checked"),this.el.classList.remove("m-unchecked")):(this.el.classList.remove("m-checked"),this.el.classList.add("m-unchecked")),e||this.el.dispatchEvent(new CustomEvent("check",{bubbles:!0,detail:{type:"check",state:this.state}}))},te.prototype._onClick=function(){this.toggleState()},te.prototype._onRightClick=function(){this.toggleState(!0,!0),this.el.dispatchEvent(new CustomEvent("uncheck-others",{bubbles:!0,detail:{type:"uncheck-others"}}))},ee.prototype.update=function(){var t=this;this.list.forEach(function(e,n){var i=x(t.config,t.graphs[n].color).button;e.update(y(i))})},ee.prototype._onCheck=function(t,e){this.cb(t,e.detail)},ee.prototype._onUncheckOthers=function(t,e){this.list.forEach(function(e,n){n!==t&&e.toggleState(!1,!0)}),this.cb(t,e.detail)},ne.prototype.redraw=function(t){var e=this.config.state.local.group;e.main.update(void 0,t),e.scroll.chart.update(void 0,t),e.legend.update()},ne.prototype._initConfig=function(t,e){this.config=a({},e),this.config.state=a({},e.state,{local:{index:+this.el.getAttribute("index"),scaled:!!t.y_scaled,stacked:!!t.stacked,percentage:!!t.percentage,group:null}}),this.config.columns=a({},e.columns,{min:parseInt(this.el.getAttribute("min-columns"))||e.columns.min,max:parseInt(this.el.getAttribute("max-columns"))||e.columns.max})},ne.prototype._initGroup=function(t,e,n){var i=this._convertData(t,!!n);i.minColumns=e,i.zoomed=null!=n&&n,i.eWrap=r(this.el,"div","l-wrap"),i.scroll=this._initScroll(r(i.eWrap,"div"),i),i.legend=this._initLegend(r(i.eWrap,"div"),i),i.main=this._initMainChart(s(i.eWrap,"div"),i),i.main.update(i.scroll.bounds,!0);var a=s(i.eWrap,"header","d-widget-header");if(i.eRange=r(a,"span","e-date-range"),this._updateRange(i),i.zoomed){var o=s(a,"a","e-zoom-out");o.textContent=this.config.localization.words.zoomOut,r(o,"i"),o.addEventListener("click",this._onZoomOut.bind(this))}else{var l=this.el.getAttribute("heading");l&&(s(a,"span","e-heading").textContent=l)}return i},ne.prototype._convertData=function(t,e){var n={type:5===this.config.state.local.index&&e?"pie":t.types.y0,xAxis:null,graphs:[]},i=function(e){"x"===t.types[e]?n.xAxis=h(t.columns,function(t){return t[0]===e}).slice(1):n.graphs.push({name:t.names[e],color:t.colors[e].toLowerCase(),columns:h(t.columns,function(t){return t[0]===e}).slice(1),visible:!0})};for(var a in t.types)i(a);return n},ne.prototype._initScroll=function(t,e){var n=this,i=new Kt(t,e.graphs,this.config,e.type,e.minColumns);return i.el.addEventListener("new-bounds",function(t){var e=n.config.state.local.group;e.main.update(t.detail),n._updateRange(e)}),i},ne.prototype._updateRange=function(t){var e=t.scroll.bounds,n=t.xAxis[e.first],i=t.xAxis[e.last-+(this.original!==t&&"bar"!==t.type)],a=this.config.localization,o=T(n,a,!0),r=T(i,a,!0);t.eRange.textContent=o===r?"".concat(k(n,a,!0),", ").concat(o):"".concat(o," - ").concat(r)},ne.prototype._initLegend=function(t,e){return new ee(t,e.graphs,this.config,this._onButtonCheck.bind(this))},ne.prototype._onButtonCheck=function(t,e){var n=this.config.state.local.group;"check"===e.type?n.graphs[t].visible=e.state:"uncheck-others"===e.type&&n.graphs.forEach(function(e,n){e.visible=n===t}),n.scroll.chart.update(),n.main.update()},ne.prototype._initMainChart=function(t,e){var n,i=this;switch(e.type){case"line":n=rt;break;case"bar":n=Ot;break;case"area":n=Bt;break;case"pie":n=Gt}var a=new n(t,e.xAxis,e.graphs,this.config,e.type,e.zoomed);return a.el.addEventListener("zoom",function(t){i.original.main===a?i._onZoomIn(t.detail.column):i._onZoomOut(t.detail.column)}),a},ne.prototype._onZoomIn=function(t){var e=this,n=this._initZoomedGroup;4===this.config.state.local.index?n=this._initZoomedGroup4:5===this.config.state.local.index&&(n=this._initZoomedGroup5),n.bind(this)(t,function(){e._updateLegendOnZoom(e.original,e.zoomed),e.redraw(!0),c(e.el,"m-zoom-in",e.config.timeout.zoom,function(){l(e.original.eWrap)},!0)})},ne.prototype._onZoomOut=function(){var t=this;this.config.state.local.group=this.original,this.el.appendChild(this.original.eWrap),l(this.original.main.tooltip.el),4!==this.config.state.local.index&&this._updateLegendOnZoom(this.zoomed,this.original),this.redraw(!0),5===this.config.state.local.index&&(this.original.scroll.update(this.zoomed.scroll.getBounds(),!0),this.original.scroll.pos=this.zoomed.scroll.pos,this.original.scroll.width=this.zoomed.scroll.width,this.original.scroll._updateSelector(),this.original.main.update(this.zoomed.scroll.getBounds(),!0)),c(this.el,"m-zoom-out",this.config.timeout.zoom,function(){l(t.zoomed.eWrap),delete t.zoomed},!0)},ne.prototype._updateLegendOnZoom=function(t,e){e.legend.el.classList.add("m-silent"),t.legend.list.forEach(function(t,n){e.legend.list[n].toggleState(t.state,!0),e.graphs[n].visible=t.state}),setTimeout(function(){e.legend.el.classList.remove("m-silent")},0)},ne.prototype._initZoomedGroup=function(t,e){for(var n=this,i=this.original.xAxis,a=t+3<i.length?Math.max(0,t-3):i.length-7,o=a+6,r=function(t){for(var e=t[0],n=(t[1]||t[0]).columns[0].length-1,i=1;i<=6;i++)for(var o=0;o<e.columns.length;o++)e.columns[o]=e.columns[o].concat(t[i].columns[o].slice(1));s(e,a,n)},s=function(i,a,o){var r="bar"===i.types.y0;n.config.state.local.group=n.zoomed=n._initGroup(i,o-+r,o),n.zoomed.scroll.update({first:o*(t-a)+1-+r,last:o*(t-a+1)-+r}),e&&e()},l=[],u=0,c=a;c<=o;c++)!function(t){f(n._columnToUrl(t),function(e){l[t-a]=e,++u==o-a+1&&r(l)})}(c)},ne.prototype._initZoomedGroup4=function(t,e){var n=this,i=[t];t-1>=0&&i.push(t-1),t-7>=0&&i.push(t-7);for(var a=function(t){var e=t[0],a=n.original.xAxis.length-1,r=n.original.main.grid.hLabels;e.names.y0=r.getLabel(a-i[0],!0),t.length>=2&&(e.colors.y1="#558ded",e.columns[2]=t[1].columns[1],e.columns[2][0]="y1",e.names.y1=r.getLabel(a-i[1],!0),e.types.y1=t[1].types.y0),t.length>=3&&(e.colors.y2="#5cbcdf",e.columns[3]=t[2].columns[1],e.columns[3][0]="y2",e.names.y2=r.getLabel(a-i[2],!0),e.types.y2=t[2].types.y0),o(e,0,e.columns[0].length-1)},o=function(t,i,a){n.config.state.local.group=n.zoomed=n._initGroup(t,a-i,a-i),l(n.zoomed.scroll.el),e&&e()},r=[],s=0,u=0;u<i.length;u++)!function(t){f(n._columnToUrl(i[t]),function(e){r[t]=e,++s===i.length&&a(r)})}(u)},ne.prototype._initZoomedGroup5=function(t,e){var n=this;f("data/5/overview.json",function(t){n.config.state.local.group=n.zoomed=n._initGroup(t,null,!0),n.zoomed.scroll.update(n.original.scroll.getBounds(),!0),n.zoomed.scroll.pos=n.original.scroll.pos,n.zoomed.scroll.width=n.original.scroll.width,n.zoomed.scroll._updateSelector(),e&&e()})},ne.prototype._columnToUrl=function(t){var e=new Date(this.original.xAxis[t]),n=e.getUTCMonth();n=(n<9?"0":"")+(n+1);var i=e.getUTCDate();return i=(i<10?"0":"")+i,"data/".concat(this.config.state.local.index,"/").concat(e.getUTCFullYear(),"-").concat(n,"/").concat(i,".json")};var ae=[];document.addEventListener("DOMContentLoaded",function(){!function(){var t=document.querySelector("body"),e=document.querySelector(".b-toggle-night-mode"),n=new L(e);e.addEventListener("toggle",function(e){window.localStorage.setItem("night-mode",e.detail.index),"night"===e.detail.state?t.classList.add("m-night-mode"):t.classList.remove("m-night-mode"),O.state.global.theme=e.detail.state,ae.forEach(function(t){t.redraw()})});var i=window.localStorage.getItem("night-mode");null!=i&&n.update(+i)}(),function t(e){for(var n in e)switch(ie(e[n])){case"string":e[n]=b(e[n]);break;case"object":t(e[n])}}(O.colors),Array.prototype.forEach.call(document.querySelectorAll(".b-chart-widget"),function(t){var e=t.getAttribute("index");e&&!isNaN(+e)&&f("data/".concat(e,"/overview.json"),function(e){ae.push(new ne(t,e,O))})})})}]);